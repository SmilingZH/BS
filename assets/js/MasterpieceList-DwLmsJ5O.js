import{d as D,k as v,u as I,r as $,g as C,C as T,c as o,e as B,b as i,m as k,a as M,t as c,q as E,F as f,f as _,o as l}from"./vendor-B5ERtXls.js";import{l as w,k as L,p as P,_ as R}from"./index-BRBySVmZ.js";import{m as p}from"./art-detail-info-DgScSf78.js";const S={class:"masterpiece-list-page"},x={class:"content-container"},N={key:0,class:"dynasty-filter-info"},V={class:"dynasty-badge"},F={class:"dynasty-sections"},U={class:"dynasty-title"},j={class:"masterpieces-grid"},A=["onClick"],H={class:"card-content"},O={class:"masterpiece-title"},z={class:"masterpiece-meta"},G={class:"artist"},J={class:"masterpiece-desc"},K={key:0,class:"technique-tags"},Q=D({__name:"MasterpieceList",setup(W){const d=E(),g=I(),u=v(()=>{const e=g.query.dynasty;return e?parseInt(e):null}),r=v(()=>u.value===null?null:w.find(e=>e.id===u.value)),h=$([]),m=()=>{const e=[];u.value!==null?P(u.value).forEach(t=>{var a;const s=p.find(y=>y.title===t.title&&y.artist===t.artist);e.push({id:t.id,title:t.title,artist:t.artist,period:t.time,dynasty:((a=r.value)==null?void 0:a.name)||"",description:t.description,significance:t.significance,technique:(s==null?void 0:s.technique)||[],imageUrl:t.imageId?`/assets/images/paintings/${t.imageId}.webp`:void 0,collection:t.location})}):w.forEach(n=>{n.masterpieces.forEach(t=>{const s=p.find(a=>a.title===t.title&&a.artist===t.artist);e.push({id:t.id,title:t.title,artist:t.artist,period:t.time,dynasty:n.name,description:t.description,significance:t.significance,technique:(s==null?void 0:s.technique)||[],imageUrl:t.imageId?`/assets/images/paintings/${t.imageId}.webp`:void 0,collection:t.location})})}),h.value=e},b=v(()=>{const e={};return h.value.forEach(t=>{e[t.dynasty]||(e[t.dynasty]=[]),e[t.dynasty].push(t)}),Object.entries(e).map(([t,s])=>({dynasty:t,masterpieces:s}))}),q=e=>{sessionStorage.setItem("masterpieceReferrer",d.currentRoute.value.fullPath);const n=p.find(t=>t.id===e);if(n)d.push(`/masterpiece/${n.id}`);else{const t=h.value.find(s=>s.id===e);if(t){const s=p.find(a=>a.title===t.title&&a.artist===t.artist);s?d.push(`/masterpiece/${s.id}`):alert(`《${t.title}》的详细信息暂未添加，即将上线，敬请期待！`)}}};return C(()=>{m(),r.value&&setTimeout(()=>{window.scrollTo({top:0,behavior:"smooth"})},100)}),T(()=>g.fullPath,()=>{m(),setTimeout(()=>{window.scrollTo({top:0,behavior:"smooth"})},100)}),(e,n)=>(l(),o("div",S,[B(k(L),{activePath:"/historical-timeline"}),n[3]||(n[3]=i("div",{class:"app-header-spacer"},null,-1)),i("div",x,[n[2]||(n[2]=i("div",{class:"header-section"},[i("h1",{class:"page-title"},"中国绘画经典名作"),i("p",{class:"page-description"}," 探索跨越千年的中国绘画杰作，领略不同朝代的艺术风采 ")],-1)),r.value?(l(),o("div",N,[i("div",V,c(r.value.name)+"代 ",1),i("p",null,"当前显示"+c(r.value.name)+"代经典名作",1),i("button",{class:"clear-filter-btn",onClick:n[0]||(n[0]=t=>k(d).push("/masterpiece-list"))},"查看所有名作")])):M("",!0),i("div",F,[(l(!0),o(f,null,_(b.value,t=>(l(),o("div",{key:t.dynasty,class:"dynasty-section"},[i("h2",U,c(t.dynasty)+"朝",1),i("div",j,[(l(!0),o(f,null,_(t.masterpieces,s=>(l(),o("div",{key:s.id,class:"masterpiece-card",onClick:a=>q(s.id)},[i("div",H,[i("h3",O,c(s.title),1),i("div",z,[i("span",G,c(s.artist),1)]),i("p",J,c(s.description.substring(0,80))+"...",1),s.technique&&s.technique.length>0?(l(),o("div",K,[(l(!0),o(f,null,_(s.technique,(a,y)=>(l(),o("span",{key:y,class:"tag"},c(a),1))),128))])):M("",!0),n[1]||(n[1]=i("div",{class:"view-detail"},"查看详情 →",-1))])],8,A))),128))])]))),128))])])]))}}),tt=R(Q,[["__scopeId","data-v-131d3eaa"]]);export{tt as default};
