import{d as U,k as P,u as V,r as d,C as W,g as L,c as a,b as s,a as c,e as E,m as F,n as j,t as n,F as _,f as I,E as y,K as A,q as G,o as r,y as H}from"./vendor-B5ERtXls.js";import{k as K,s as b,o as T,_ as O}from"./index-4XJbkE_t.js";import{m}from"./art-detail-info-CC9r1Tz1.js";const Z={class:"detail-container"},J={class:"detail-layout"},Q={class:"detail-info"},X={class:"masterpiece-title"},Y={class:"masterpiece-meta"},ee={class:"artist"},te={class:"period"},se={key:0,class:"collection"},ie={class:"detail-section"},le={class:"detail-section"},oe={class:"detail-section"},ae={class:"technique-tags"},ne={key:0,class:"detail-section"},re={key:1,class:"detail-section"},ce={class:"artwork-display"},de={key:0,class:"image-container"},ue=["src","alt"],pe={key:1,class:"placeholder-image"},me={class:"placeholder-text"},ve={key:0,class:"detail-section"},fe={class:"related-works"},ge=["onClick"],_e={key:0,class:"recommendations-section"},ye={class:"recommendations-grid"},be=["onClick"],we={class:"recommendation-image-container"},he=["src","alt"],ke={key:1,class:"recommendation-placeholder"},Ie={class:"recommendation-info"},Te=["src"],Ce=U({__name:"MasterpieceDetail",setup(Me){const C=V(),u=G(),v=P(()=>C.params.id),l=d(null),p=d([]),f=d(!1),w=d(null),h=d(!1),M=d(""),g={"0001":0,"0002":1,"0003":2,"0004":3,"0005":4,"0006":5,"0007":6,"0008":7,"0009":8,"0010":9,"0011":10,"0012":11,"0013":12,"0014":13,"0015":14,"0016":15,"0017":16,"0018":17,"0019":18,"0020":19,"0021":20,"0022":21,"0023":22,"0024":23,"0025":24,"0026":25,"0027":26,"0028":27,"0029":28,"0030":29,"0031":30},D={"æ¢…èŠ±å±±èŒ¶é›ªé›€å›¾.webp":0,"æ¢¨èŠ±æ–‘é¸ å›¾.webp":1,"çŒ¿é©¬å›¾.webp":2,"èŠ™è“‰é”¦é¸¡å›¾.webp":3,"æ¡ƒé¸ å›¾.webp":4,"äº”è‰²é¹¦é¹‰å›¾.webp":5,"å…«èŠ±å›¾å·.webp":6,"èŠ±é¸Ÿå›¾å·.webp":7,"æ¡ƒç«¹é”¦é¸¡å›¾è½´.webp":8,"ç‹®å¤´é¹…å›¾.webp":9,"æ¡‚èŠå±±ç¦½å›¾.webp":10,"ç«¹é¹¤å›¾è½´.webp":11,"ç§‹æµ·æ£ å›¾.webp":12,"ä¹å…°å›¾.webp":13,"å…°ç«¹å›¾.webp":14,"æ±Ÿå¸†æ¥¼é˜å›¾.webp":15,"æ˜Žçš‡å¹¸èœ€å›¾.webp":16,"é›ªæ™¯å¯’æž—å›¾.webp":17,"å±‚å å†°ç»¡å›¾è½´.webp":18,"æºªå±±è¡Œæ—…å›¾.webp":19,"å±±å±…å›¾.webp":20,"å¢¨æ¢…å›¾.webp":21,"æž¯æœ¨ç«¹çŸ³å›¾.webp":22,"å¢¨ç«¹å¡çŸ³å›¾è½´.webp":23,"æ¢…èŠ±å°é¸Ÿ.webp":24,"æ¢…çŸ³å›¾è½´.webp":25,"é©´èƒŒåŸè¯—å›¾è½´.webp":26,"æ°´å¢¨ç‰¡ä¸¹å›¾è½´.webp":27,"ç–æ ‘å½’æž—å›¾.webp":28,"çŽ‰å ‚å¯Œè´µå›¾.webp":29,"æœˆå¤œå±±é¸¡å›¾.webp":30},k=i=>{if(!i)return"";const t=i.split("/").pop();if(!t)return"";if(t in D)return b[D[t]];if(t.includes("paintings")){const e=t.match(/(\d{4})\.jpg/);if(e&&e[1]in g)return b[g[e[1]]]}for(const e of T)if(t.includes(e.title)){const o=e.id;if(o in g)return b[g[o]]}return t.includes("ç‰§é©¬å›¾")?b[2]:(console.warn(`æœªæ‰¾åˆ°å›¾ç‰‡: ${t}`),"")},$=()=>{w.value&&(w.value.scrollTop=0),window.scrollTo({top:0,behavior:"instant"});const i=document.querySelector(".masterpiece-detail-page");i&&(i.scrollTop=0)},R=async()=>{$(),f.value=!0,l.value=null,p.value=[],await H();const i=v.value;console.log("å°è¯•èŽ·å–ä½œå“è¯¦æƒ…ï¼ŒID:",i);let t=m.find(e=>e.id===i);if(!t&&i.match(/^0+/)){const e=i.replace(/^0+/,"");console.log("å°è¯•ä½¿ç”¨æ— å‰å¯¼é›¶IDåŒ¹é…:",e),t=m.find(o=>o.id===e)}if(t)console.log("æ‰¾åˆ°ä½œå“è¯¦æƒ…:",t.title),l.value=t,p.value=m.filter(e=>e.id!==v.value&&(e.dynasty===t.dynasty||e.artist===t.artist)).slice(0,4);else{console.error(`æœªæ‰¾åˆ°IDä¸º${i}çš„ä½œå“è¯¦æƒ…ï¼Œå°è¯•ä»Žimage-infoèŽ·å–`);let e=T.find(o=>o.id===i);if(!e&&i.match(/^0+/)){const o=i.replace(/^0+/,"");e=T.find(q=>q.id===o)}if(e)console.log("ä»Žimage-infoä¸­æ‰¾åˆ°åŸºæœ¬ä¿¡æ¯:",e),l.value={id:e.id,title:e.title,artist:e.artist,period:e.period,dynasty:e.dynasty,description:e.content,significance:e.yiyi||"æš‚æ— è‰ºæœ¯ä»·å€¼å’ŒåŽ†å²æ„ä¹‰çš„ä»‹ç»",technique:e.technique?[e.technique]:["æš‚æ— æŠ€æ³•ä¿¡æ¯"],size:e.dimensions,collection:e.location},p.value=m.filter(o=>o.dynasty===e.dynasty||o.artist===e.artist).slice(0,4);else{setTimeout(()=>{alert("æŠ±æ­‰ï¼Œæœªæ‰¾åˆ°è¯¥ä½œå“çš„è¯¦ç»†ä¿¡æ¯ï¼Œå³å°†è¿”å›žåŽ†å²é•¿æ²³é¡µé¢"),u.push("/historical-timeline")},3e3);return}}setTimeout(()=>{f.value=!1,$()},300)};W(()=>C.params.id,(i,t)=>{i!==t&&(console.log(`ä½œå“IDå·²å˜æ›´: ${t} -> ${i}`),R())},{immediate:!0});const S=i=>{if(i===v.value){console.log("å·²ç»åœ¨å½“å‰ä½œå“é¡µé¢ï¼Œä¸éœ€è¦å¯¼èˆª");return}u.replace(`/masterpiece/${i}`)},z=(i,t)=>{const e=m.find(o=>o.title===i&&o.artist===t);if(e){if(e.id===v.value){console.log("å·²ç»åœ¨å½“å‰ä½œå“é¡µé¢ï¼Œä¸éœ€è¦å¯¼èˆª");return}u.replace(`/masterpiece/${e.id}`)}else alert(`ã€Š${i}ã€‹çš„è¯¦ç»†ä¿¡æ¯æš‚æœªæ·»åŠ ï¼Œæ•¬è¯·æœŸå¾…ï¼`)},B=()=>{f.value=!1;const i=sessionStorage.getItem("masterpieceReferrer");i?(sessionStorage.removeItem("masterpieceReferrer"),u.push(i)):u.push("/historical-timeline")},N=i=>{M.value=i,h.value=!0,document.body.style.overflow="hidden"},x=()=>{h.value=!1,document.body.style.overflow="auto"};return L(()=>{}),(i,t)=>(r(),a(_,null,[s("div",{class:"masterpiece-detail-page",ref_key:"detailPageRef",ref:w},[E(F(K),{activePath:"/historical-timeline",onBackClick:B}),t[14]||(t[14]=s("div",{class:"app-header-spacer"},null,-1)),l.value?(r(),a("div",{key:0,class:j(["content-container",{"content-transitioning":f.value}])},[s("div",Z,[s("div",J,[s("div",Q,[s("h1",X,n(l.value.title),1),s("div",Y,[s("span",ee,"ä½œè€…: "+n(l.value.artist),1),s("span",te,"å¹´ä»£: "+n(l.value.period)+" ("+n(l.value.dynasty)+"æœ)",1),l.value.collection?(r(),a("span",se,"æ”¶è—: "+n(l.value.collection),1)):c("",!0)]),s("section",ie,[t[2]||(t[2]=s("h2",null,"ä½œå“ä»‹ç»",-1)),s("p",null,n(l.value.description),1)]),s("section",le,[t[3]||(t[3]=s("h2",null,"è‰ºæœ¯ä»·å€¼",-1)),s("p",null,n(l.value.significance),1)]),s("section",oe,[t[4]||(t[4]=s("h2",null,"åˆ›ä½œæŠ€æ³•",-1)),s("div",ae,[(r(!0),a(_,null,I(l.value.technique,(e,o)=>(r(),a("span",{class:"tag",key:o},n(e),1))),128))])]),l.value.size?(r(),a("section",ne,[t[5]||(t[5]=s("h2",null,"ä½œå“è§„æ ¼",-1)),s("p",null,n(l.value.size),1)])):c("",!0),l.value.collection?(r(),a("section",re,[t[6]||(t[6]=s("h2",null,"æ”¶è—åœ°ç‚¹",-1)),s("p",null,n(l.value.collection),1)])):c("",!0),t[7]||(t[7]=s("div",{class:"scroll-viewer-container"},[s("span",{class:"bug-notice"},"æ­¤è·³è½¬åŠŸèƒ½æœ‰BUGï¼Œå¾…ä¿®å¤"),s("button",{class:"scroll-viewer-button",disabled:""},[s("span",{class:"scroll-icon"},"ðŸ–¼ï¸"),y(" å·è½´æŸ¥çœ‹æ¨¡å¼ ")])],-1))]),s("div",ce,[l.value.imageUrl?(r(),a("div",de,[s("img",{src:k(l.value.imageUrl),alt:l.value.title,class:"artwork-image",onClick:t[0]||(t[0]=e=>N(k(l.value.imageUrl)))},null,8,ue)])):(r(),a("div",pe,[s("div",me,[y(" ã€Š"+n(l.value.title)+"ã€‹ ",1),t[8]||(t[8]=s("div",{class:"placeholder-subtext"},"å›¾ç‰‡å‡†å¤‡ä¸­",-1))])]))])]),l.value.relatedWorks&&l.value.relatedWorks.length>0?(r(),a("section",ve,[t[12]||(t[12]=s("h2",null,"ç›¸å…³ä½œå“",-1)),s("div",fe,[(r(!0),a(_,null,I(l.value.relatedWorks,(e,o)=>(r(),a("div",{key:o,class:"related-work-item",onClick:q=>z(e.title,e.artist)},[s("h3",null,n(e.title),1),s("p",null,[t[9]||(t[9]=s("strong",null,"ä½œè€…:",-1)),y(" "+n(e.artist),1)]),s("p",null,[t[10]||(t[10]=s("strong",null,"å…³ç³»:",-1)),y(" "+n(e.relation),1)]),t[11]||(t[11]=s("div",{class:"view-detail"},"æŸ¥çœ‹è¯¦æƒ… â†’",-1))],8,ge))),128))])])):c("",!0)]),p.value.length>0?(r(),a("section",_e,[t[13]||(t[13]=s("h2",{class:"section-title"},"ç›¸å…³ç”»ä½œæŽ¨è",-1)),s("div",ye,[(r(!0),a(_,null,I(p.value,e=>(r(),a("div",{key:e.id,class:"recommendation-card",onClick:o=>S(e.id)},[s("div",we,[e.imageUrl?(r(),a("img",{key:0,src:k(e.imageUrl),alt:e.title,class:"recommendation-image"},null,8,he)):(r(),a("div",ke,[s("span",null,n(e.title),1)]))]),s("div",Ie,[s("h3",null,n(e.title),1),s("p",null,n(e.artist)+" | "+n(e.dynasty)+"æœ",1)])],8,be))),128))])])):c("",!0)],2)):c("",!0)],512),h.value?(r(),a("div",{key:0,class:"image-modal",onClick:x},[s("div",{class:"image-modal-content",onClick:t[1]||(t[1]=A(()=>{},["stop"]))},[s("span",{class:"close-button",onClick:x},"Ã—"),s("img",{src:M.value,alt:"Zoomed Image",class:"zoomed-image"},null,8,Te)])])):c("",!0)],64))}}),qe=O(Ce,[["__scopeId","data-v-60a0efad"]]);export{qe as default};
