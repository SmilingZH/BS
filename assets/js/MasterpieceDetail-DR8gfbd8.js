import{d as U,e as N,u as P,f as d,B as V,g as W,i,j as t,k as c,a as j,x as q,n as L,t as a,F as f,l as I,D as _,I as F,m as A,o as n,s as E}from"./vendor-1Pylr8mE.js";import{j as G,s as k,l as H,_ as O}from"./index-B3c5FRRi.js";import{m as C}from"./art-detail-info-QH3f716g.js";const Z={class:"detail-container"},J={class:"detail-layout"},K={class:"detail-info"},Q={class:"masterpiece-title"},X={class:"masterpiece-meta"},Y={class:"artist"},ee={class:"period"},te={key:0,class:"collection"},se={class:"detail-section"},le={class:"detail-section"},oe={class:"detail-section"},ie={class:"technique-tags"},ae={key:0,class:"detail-section"},ne={key:1,class:"detail-section"},re={class:"artwork-display"},ce={key:0,class:"image-container"},de=["src","alt"],ue={key:1,class:"placeholder-image"},pe={class:"placeholder-text"},ve={key:0,class:"detail-section"},me={class:"related-works"},ge=["onClick"],fe={key:0,class:"recommendations-section"},_e={class:"recommendations-grid"},ke=["onClick"],he={class:"recommendation-image-container"},be=["src","alt"],ye={key:1,class:"recommendation-placeholder"},we={class:"recommendation-info"},Ie=["src"],Ce=U({__name:"MasterpieceDetail",setup(Me){const M=P(),u=A(),p=N(()=>M.params.id),o=d(null),v=d([]),m=d(!1),h=d(null),b=d(!1),T=d(""),g={"0001":0,"0002":1,"0003":2,"0004":3,"0005":4,"0006":5,"0007":6,"0008":7,"0009":8,"0010":9,"0011":10,"0012":11,"0013":12,"0014":13,"0015":14},y=s=>{if(!s)return"";const e=s.split("/").pop();if(!e)return"";const l={"æ¢…èŠ±å±±èŒ¶é›ªé›€å›¾.webp":0,"æ¢¨èŠ±æ–‘é¸ å›¾.webp":1,"çŒ¿é©¬å›¾.webp":2,"èŠ™è“‰é”¦é¸¡å›¾.webp":3,"æ¡ƒé¸ å›¾.webp":4,"äº”è‰²é¹¦é¹‰å›¾.webp":5,"å…«èŠ±å›¾å·.webp":6,"èŠ±é¸Ÿå›¾å·.webp":7,"æ¡ƒç«¹é”¦é¸¡å›¾è½´.webp":8,"ç‹®å¤´é¹…å›¾.webp":9,"æ¡‚èŠå±±ç¦½å›¾.webp":10,"ç«¹é¹¤å›¾è½´.webp":11,"ç§‹æµ·æ£ å›¾.webp":12,"ä¹å…°å›¾.webp":13,"å…°ç«¹å›¾.webp":14,"å…«èŠ±å›¾.webp":6,"æ¡ƒç«¹é”¦é¸¡å›¾.webp":8,"ç™½ç‰¡ä¸¹å›¾.webp":7,"ç«¹é¹¤å›¾.webp":11,"ç‰§é©¬å›¾.webp":2};if(e in l)return k[l[e]];if(e.includes("paintings")){const r=e.match(/(\d{4})\.jpg/);if(r&&r[1]in g)return k[g[r[1]]]}for(const r of H)if(e.includes(r.title)){const w=r.id;if(w in g)return k[g[w]]}return e.includes("ç‰§é©¬å›¾")?k[2]:(console.warn(`æœªæ‰¾åˆ°å›¾ç‰‡: ${e}`),"")},$=()=>{h.value&&(h.value.scrollTop=0),window.scrollTo({top:0,behavior:"instant"});const s=document.querySelector(".masterpiece-detail-page");s&&(s.scrollTop=0)},B=async()=>{$(),m.value=!0,o.value=null,v.value=[],await E();const s=C.find(e=>e.id===p.value);if(s)o.value=s,v.value=C.filter(e=>e.id!==p.value&&(e.dynasty===s.dynasty||e.artist===s.artist)).slice(0,4);else{console.error(`æœªæ‰¾åˆ°IDä¸º${p.value}çš„ä½œå“è¯¦æƒ…`),u.push("/historical-timeline");return}setTimeout(()=>{m.value=!1,$()},300)};V(()=>M.params.id,(s,e)=>{s!==e&&(console.log(`ä½œå“IDå·²å˜æ›´: ${e} -> ${s}`),B())},{immediate:!0});const R=s=>{if(s===p.value){console.log("å·²ç»åœ¨å½“å‰ä½œå“é¡µé¢ï¼Œä¸éœ€è¦å¯¼èˆª");return}u.replace(`/masterpiece/${s}`)},S=(s,e)=>{const l=C.find(r=>r.title===s&&r.artist===e);if(l){if(l.id===p.value){console.log("å·²ç»åœ¨å½“å‰ä½œå“é¡µé¢ï¼Œä¸éœ€è¦å¯¼èˆª");return}u.replace(`/masterpiece/${l.id}`)}else alert(`ã€Š${s}ã€‹çš„è¯¦ç»†ä¿¡æ¯æš‚æœªæ·»åŠ ï¼Œæ•¬è¯·æœŸå¾…ï¼`)},x=()=>{m.value=!1;const s=sessionStorage.getItem("masterpieceReferrer");s?(sessionStorage.removeItem("masterpieceReferrer"),u.push(s)):u.push("/historical-timeline")},z=s=>{T.value=s,b.value=!0,document.body.style.overflow="hidden"},D=()=>{b.value=!1,document.body.style.overflow="auto"};return W(()=>{}),(s,e)=>(n(),i(f,null,[t("div",{class:"masterpiece-detail-page",ref_key:"detailPageRef",ref:h},[j(q(G),{activePath:"/historical-timeline",onBackClick:x}),e[14]||(e[14]=t("div",{class:"app-header-spacer"},null,-1)),o.value?(n(),i("div",{key:0,class:L(["content-container",{"content-transitioning":m.value}])},[t("button",{class:"back-button",onClick:x},"â† è¿”å›ž"),t("div",Z,[t("div",J,[t("div",K,[t("h1",Q,a(o.value.title),1),t("div",X,[t("span",Y,"ä½œè€…: "+a(o.value.artist),1),t("span",ee,"å¹´ä»£: "+a(o.value.period)+" ("+a(o.value.dynasty)+"æœ)",1),o.value.collection?(n(),i("span",te,"æ”¶è—: "+a(o.value.collection),1)):c("",!0)]),t("section",se,[e[2]||(e[2]=t("h2",null,"ä½œå“ä»‹ç»",-1)),t("p",null,a(o.value.description),1)]),t("section",le,[e[3]||(e[3]=t("h2",null,"è‰ºæœ¯ä»·å€¼",-1)),t("p",null,a(o.value.significance),1)]),t("section",oe,[e[4]||(e[4]=t("h2",null,"åˆ›ä½œæŠ€æ³•",-1)),t("div",ie,[(n(!0),i(f,null,I(o.value.technique,(l,r)=>(n(),i("span",{class:"tag",key:r},a(l),1))),128))])]),o.value.size?(n(),i("section",ae,[e[5]||(e[5]=t("h2",null,"ä½œå“è§„æ ¼",-1)),t("p",null,a(o.value.size),1)])):c("",!0),o.value.collection?(n(),i("section",ne,[e[6]||(e[6]=t("h2",null,"æ”¶è—åœ°ç‚¹",-1)),t("p",null,a(o.value.collection),1)])):c("",!0),e[7]||(e[7]=t("div",{class:"scroll-viewer-container"},[t("span",{class:"bug-notice"},"æ­¤è·³è½¬åŠŸèƒ½æœ‰BUGï¼Œå¾…ä¿®å¤"),t("button",{class:"scroll-viewer-button",disabled:""},[t("span",{class:"scroll-icon"},"ðŸ–¼ï¸"),_(" å·è½´æŸ¥çœ‹æ¨¡å¼ ")])],-1))]),t("div",re,[o.value.imageUrl?(n(),i("div",ce,[t("img",{src:y(o.value.imageUrl),alt:o.value.title,class:"artwork-image",onClick:e[0]||(e[0]=l=>z(y(o.value.imageUrl)))},null,8,de)])):(n(),i("div",ue,[t("div",pe,[_(" ã€Š"+a(o.value.title)+"ã€‹ ",1),e[8]||(e[8]=t("div",{class:"placeholder-subtext"},"å›¾ç‰‡å‡†å¤‡ä¸­",-1))])]))])]),o.value.relatedWorks&&o.value.relatedWorks.length>0?(n(),i("section",ve,[e[12]||(e[12]=t("h2",null,"ç›¸å…³ä½œå“",-1)),t("div",me,[(n(!0),i(f,null,I(o.value.relatedWorks,(l,r)=>(n(),i("div",{key:r,class:"related-work-item",onClick:w=>S(l.title,l.artist)},[t("h3",null,a(l.title),1),t("p",null,[e[9]||(e[9]=t("strong",null,"ä½œè€…:",-1)),_(" "+a(l.artist),1)]),t("p",null,[e[10]||(e[10]=t("strong",null,"å…³ç³»:",-1)),_(" "+a(l.relation),1)]),e[11]||(e[11]=t("div",{class:"view-detail"},"æŸ¥çœ‹è¯¦æƒ… â†’",-1))],8,ge))),128))])])):c("",!0)]),v.value.length>0?(n(),i("section",fe,[e[13]||(e[13]=t("h2",{class:"section-title"},"ç›¸å…³ç”»ä½œæŽ¨è",-1)),t("div",_e,[(n(!0),i(f,null,I(v.value,l=>(n(),i("div",{key:l.id,class:"recommendation-card",onClick:r=>R(l.id)},[t("div",he,[l.imageUrl?(n(),i("img",{key:0,src:y(l.imageUrl),alt:l.title,class:"recommendation-image"},null,8,be)):(n(),i("div",ye,[t("span",null,a(l.title),1)]))]),t("div",we,[t("h3",null,a(l.title),1),t("p",null,a(l.artist)+" | "+a(l.dynasty)+"æœ",1)])],8,ke))),128))])])):c("",!0)],2)):c("",!0)],512),b.value?(n(),i("div",{key:0,class:"image-modal",onClick:D},[t("div",{class:"image-modal-content",onClick:e[1]||(e[1]=F(()=>{},["stop"]))},[t("span",{class:"close-button",onClick:D},"Ã—"),t("img",{src:T.value,alt:"Zoomed Image",class:"zoomed-image"},null,8,Ie)])])):c("",!0)],64))}}),De=O(Ce,[["__scopeId","data-v-327090d2"]]);export{De as default};
