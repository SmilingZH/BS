import{d as N,k as U,l as P,r as d,C as V,g as W,c as i,b as t,a as c,e as q,y as L,n as j,t as a,F as g,f as y,E as b,K as E,u as F,o as n,x as A}from"./vendor-Cz7S_O-B.js";import{j as G,s as _,m as H,_ as K}from"./index-2N_cIl-6.js";import{m as C}from"./art-detail-info-DgScSf78.js";const O={class:"detail-container"},Z={class:"detail-layout"},J={class:"detail-info"},Q={class:"masterpiece-title"},X={class:"masterpiece-meta"},Y={class:"artist"},ee={class:"period"},te={key:0,class:"collection"},se={class:"detail-section"},le={class:"detail-section"},oe={class:"detail-section"},ie={class:"technique-tags"},ae={key:0,class:"detail-section"},ne={key:1,class:"detail-section"},re={class:"artwork-display"},ce={key:0,class:"image-container"},de=["src","alt"],ue={key:1,class:"placeholder-image"},pe={class:"placeholder-text"},ve={key:0,class:"detail-section"},me={class:"related-works"},fe=["onClick"],ge={key:0,class:"recommendations-section"},be={class:"recommendations-grid"},_e=["onClick"],we={class:"recommendation-image-container"},ke=["src","alt"],he={key:1,class:"recommendation-placeholder"},ye={class:"recommendation-info"},Ce=["src"],Ie=N({__name:"MasterpieceDetail",setup(Me){const I=P(),u=F(),p=U(()=>I.params.id),o=d(null),v=d([]),m=d(!1),w=d(null),k=d(!1),M=d(""),f={"0001":0,"0002":1,"0003":2,"0004":3,"0005":4,"0006":5,"0007":6,"0008":7,"0009":8,"0010":9,"0011":10,"0012":11,"0013":12,"0014":13,"0015":14,"0016":15,"0017":16,"0018":17,"0019":18,"0020":19,"0021":20,"0022":21,"0023":22,"0024":23,"0025":24,"0026":25,"0027":26,"0028":27,"0029":28,"0030":29,"0031":30},T={"梅花山茶雪雀图.webp":0,"梨花斑鸠图.webp":1,"猿马图.webp":2,"芙蓉锦鸡图.webp":3,"桃鸠图.webp":4,"五色鹦鹉图.webp":5,"八花图卷.webp":6,"花鸟图卷.webp":7,"桃竹锦鸡图轴.webp":8,"狮头鹅图.webp":9,"桂菊山禽图.webp":10,"竹鹤图轴.webp":11,"秋海棠图.webp":12,"九兰图.webp":13,"兰竹图.webp":14,"江帆楼阁图.webp":15,"明皇幸蜀图.webp":16,"雪景寒林图.webp":17,"层叠冰绡图轴.webp":18,"溪山行旅图.webp":19,"山居图.webp":20,"墨梅图.webp":21,"枯木竹石图.webp":22,"墨竹坡石图轴.webp":23,"梅花小鸟.webp":24,"梅石图轴.webp":25,"驴背吟诗图轴.webp":26,"水墨牡丹图轴.webp":27,"疏树归林图.webp":28,"玉堂富贵图.webp":29,"月夜山鸡图.webp":30},h=l=>{if(!l)return"";const e=l.split("/").pop();if(!e)return"";if(e in T)return _[T[e]];if(e.includes("paintings")){const s=e.match(/(\d{4})\.jpg/);if(s&&s[1]in f)return _[f[s[1]]]}for(const s of H)if(e.includes(s.title)){const r=s.id;if(r in f)return _[f[r]]}return e.includes("牧马图")?_[2]:(console.warn(`未找到图片: ${e}`),"")},x=()=>{w.value&&(w.value.scrollTop=0),window.scrollTo({top:0,behavior:"instant"});const l=document.querySelector(".masterpiece-detail-page");l&&(l.scrollTop=0)},R=async()=>{x(),m.value=!0,o.value=null,v.value=[],await A();const l=C.find(e=>e.id===p.value);if(l)o.value=l,v.value=C.filter(e=>e.id!==p.value&&(e.dynasty===l.dynasty||e.artist===l.artist)).slice(0,4);else{console.error(`未找到ID为${p.value}的作品详情`),u.push("/historical-timeline");return}setTimeout(()=>{m.value=!1,x()},300)};V(()=>I.params.id,(l,e)=>{l!==e&&(console.log(`作品ID已变更: ${e} -> ${l}`),R())},{immediate:!0});const S=l=>{if(l===p.value){console.log("已经在当前作品页面，不需要导航");return}u.replace(`/masterpiece/${l}`)},B=(l,e)=>{const s=C.find(r=>r.title===l&&r.artist===e);if(s){if(s.id===p.value){console.log("已经在当前作品页面，不需要导航");return}u.replace(`/masterpiece/${s.id}`)}else alert(`《${l}》的详细信息暂未添加，敬请期待！`)},$=()=>{m.value=!1;const l=sessionStorage.getItem("masterpieceReferrer");l?(sessionStorage.removeItem("masterpieceReferrer"),u.push(l)):u.push("/historical-timeline")},z=l=>{M.value=l,k.value=!0,document.body.style.overflow="hidden"},D=()=>{k.value=!1,document.body.style.overflow="auto"};return W(()=>{}),(l,e)=>(n(),i(g,null,[t("div",{class:"masterpiece-detail-page",ref_key:"detailPageRef",ref:w},[q(L(G),{activePath:"/historical-timeline",onBackClick:$}),e[14]||(e[14]=t("div",{class:"app-header-spacer"},null,-1)),o.value?(n(),i("div",{key:0,class:j(["content-container",{"content-transitioning":m.value}])},[t("button",{class:"back-button",onClick:$},"← 返回"),t("div",O,[t("div",Z,[t("div",J,[t("h1",Q,a(o.value.title),1),t("div",X,[t("span",Y,"作者: "+a(o.value.artist),1),t("span",ee,"年代: "+a(o.value.period)+" ("+a(o.value.dynasty)+"朝)",1),o.value.collection?(n(),i("span",te,"收藏: "+a(o.value.collection),1)):c("",!0)]),t("section",se,[e[2]||(e[2]=t("h2",null,"作品介绍",-1)),t("p",null,a(o.value.description),1)]),t("section",le,[e[3]||(e[3]=t("h2",null,"艺术价值",-1)),t("p",null,a(o.value.significance),1)]),t("section",oe,[e[4]||(e[4]=t("h2",null,"创作技法",-1)),t("div",ie,[(n(!0),i(g,null,y(o.value.technique,(s,r)=>(n(),i("span",{class:"tag",key:r},a(s),1))),128))])]),o.value.size?(n(),i("section",ae,[e[5]||(e[5]=t("h2",null,"作品规格",-1)),t("p",null,a(o.value.size),1)])):c("",!0),o.value.collection?(n(),i("section",ne,[e[6]||(e[6]=t("h2",null,"收藏地点",-1)),t("p",null,a(o.value.collection),1)])):c("",!0),e[7]||(e[7]=t("div",{class:"scroll-viewer-container"},[t("span",{class:"bug-notice"},"此跳转功能有BUG，待修复"),t("button",{class:"scroll-viewer-button",disabled:""},[t("span",{class:"scroll-icon"},"🖼️"),b(" 卷轴查看模式 ")])],-1))]),t("div",re,[o.value.imageUrl?(n(),i("div",ce,[t("img",{src:h(o.value.imageUrl),alt:o.value.title,class:"artwork-image",onClick:e[0]||(e[0]=s=>z(h(o.value.imageUrl)))},null,8,de)])):(n(),i("div",ue,[t("div",pe,[b(" 《"+a(o.value.title)+"》 ",1),e[8]||(e[8]=t("div",{class:"placeholder-subtext"},"图片准备中",-1))])]))])]),o.value.relatedWorks&&o.value.relatedWorks.length>0?(n(),i("section",ve,[e[12]||(e[12]=t("h2",null,"相关作品",-1)),t("div",me,[(n(!0),i(g,null,y(o.value.relatedWorks,(s,r)=>(n(),i("div",{key:r,class:"related-work-item",onClick:Te=>B(s.title,s.artist)},[t("h3",null,a(s.title),1),t("p",null,[e[9]||(e[9]=t("strong",null,"作者:",-1)),b(" "+a(s.artist),1)]),t("p",null,[e[10]||(e[10]=t("strong",null,"关系:",-1)),b(" "+a(s.relation),1)]),e[11]||(e[11]=t("div",{class:"view-detail"},"查看详情 →",-1))],8,fe))),128))])])):c("",!0)]),v.value.length>0?(n(),i("section",ge,[e[13]||(e[13]=t("h2",{class:"section-title"},"相关画作推荐",-1)),t("div",be,[(n(!0),i(g,null,y(v.value,s=>(n(),i("div",{key:s.id,class:"recommendation-card",onClick:r=>S(s.id)},[t("div",we,[s.imageUrl?(n(),i("img",{key:0,src:h(s.imageUrl),alt:s.title,class:"recommendation-image"},null,8,ke)):(n(),i("div",he,[t("span",null,a(s.title),1)]))]),t("div",ye,[t("h3",null,a(s.title),1),t("p",null,a(s.artist)+" | "+a(s.dynasty)+"朝",1)])],8,_e))),128))])])):c("",!0)],2)):c("",!0)],512),k.value?(n(),i("div",{key:0,class:"image-modal",onClick:D},[t("div",{class:"image-modal-content",onClick:e[1]||(e[1]=E(()=>{},["stop"]))},[t("span",{class:"close-button",onClick:D},"×"),t("img",{src:M.value,alt:"Zoomed Image",class:"zoomed-image"},null,8,Ce)])])):c("",!0)],64))}}),Re=K(Ie,[["__scopeId","data-v-87b8d428"]]);export{Re as default};
