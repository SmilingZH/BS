import{d as N,k as U,l as P,r as d,C as V,g as W,c as i,b as t,a as c,e as q,y as L,n as j,t as a,F as g,f as y,E as b,K as E,u as F,o as n,x as A}from"./vendor-Cz7S_O-B.js";import{j as G,s as _,m as H,_ as K}from"./index-2N_cIl-6.js";import{m as C}from"./art-detail-info-DgScSf78.js";const O={class:"detail-container"},Z={class:"detail-layout"},J={class:"detail-info"},Q={class:"masterpiece-title"},X={class:"masterpiece-meta"},Y={class:"artist"},ee={class:"period"},te={key:0,class:"collection"},se={class:"detail-section"},le={class:"detail-section"},oe={class:"detail-section"},ie={class:"technique-tags"},ae={key:0,class:"detail-section"},ne={key:1,class:"detail-section"},re={class:"artwork-display"},ce={key:0,class:"image-container"},de=["src","alt"],ue={key:1,class:"placeholder-image"},pe={class:"placeholder-text"},ve={key:0,class:"detail-section"},me={class:"related-works"},fe=["onClick"],ge={key:0,class:"recommendations-section"},be={class:"recommendations-grid"},_e=["onClick"],we={class:"recommendation-image-container"},ke=["src","alt"],he={key:1,class:"recommendation-placeholder"},ye={class:"recommendation-info"},Ce=["src"],Ie=N({__name:"MasterpieceDetail",setup(Me){const I=P(),u=F(),p=U(()=>I.params.id),o=d(null),v=d([]),m=d(!1),w=d(null),k=d(!1),M=d(""),f={"0001":0,"0002":1,"0003":2,"0004":3,"0005":4,"0006":5,"0007":6,"0008":7,"0009":8,"0010":9,"0011":10,"0012":11,"0013":12,"0014":13,"0015":14,"0016":15,"0017":16,"0018":17,"0019":18,"0020":19,"0021":20,"0022":21,"0023":22,"0024":23,"0025":24,"0026":25,"0027":26,"0028":27,"0029":28,"0030":29,"0031":30},T={"æ¢…èŠ±å±±èŒ¶é›ªé›€å›¾.webp":0,"æ¢¨èŠ±æ–‘é¸ å›¾.webp":1,"çŒ¿é©¬å›¾.webp":2,"èŠ™è“‰é”¦é¸¡å›¾.webp":3,"æ¡ƒé¸ å›¾.webp":4,"äº”è‰²é¹¦é¹‰å›¾.webp":5,"å…«èŠ±å›¾å·.webp":6,"èŠ±é¸Ÿå›¾å·.webp":7,"æ¡ƒç«¹é”¦é¸¡å›¾è½´.webp":8,"ç‹®å¤´é¹…å›¾.webp":9,"æ¡‚èŠå±±ç¦½å›¾.webp":10,"ç«¹é¹¤å›¾è½´.webp":11,"ç§‹æµ·æ£ å›¾.webp":12,"ä¹å…°å›¾.webp":13,"å…°ç«¹å›¾.webp":14,"æ±Ÿå¸†æ¥¼é˜å›¾.webp":15,"æ˜Žçš‡å¹¸èœ€å›¾.webp":16,"é›ªæ™¯å¯’æž—å›¾.webp":17,"å±‚å å†°ç»¡å›¾è½´.webp":18,"æºªå±±è¡Œæ—…å›¾.webp":19,"å±±å±…å›¾.webp":20,"å¢¨æ¢…å›¾.webp":21,"æž¯æœ¨ç«¹çŸ³å›¾.webp":22,"å¢¨ç«¹å¡çŸ³å›¾è½´.webp":23,"æ¢…èŠ±å°é¸Ÿ.webp":24,"æ¢…çŸ³å›¾è½´.webp":25,"é©´èƒŒåŸè¯—å›¾è½´.webp":26,"æ°´å¢¨ç‰¡ä¸¹å›¾è½´.webp":27,"ç–æ ‘å½’æž—å›¾.webp":28,"çŽ‰å ‚å¯Œè´µå›¾.webp":29,"æœˆå¤œå±±é¸¡å›¾.webp":30},h=l=>{if(!l)return"";const e=l.split("/").pop();if(!e)return"";if(e in T)return _[T[e]];if(e.includes("paintings")){const s=e.match(/(\d{4})\.jpg/);if(s&&s[1]in f)return _[f[s[1]]]}for(const s of H)if(e.includes(s.title)){const r=s.id;if(r in f)return _[f[r]]}return e.includes("ç‰§é©¬å›¾")?_[2]:(console.warn(`æœªæ‰¾åˆ°å›¾ç‰‡: ${e}`),"")},x=()=>{w.value&&(w.value.scrollTop=0),window.scrollTo({top:0,behavior:"instant"});const l=document.querySelector(".masterpiece-detail-page");l&&(l.scrollTop=0)},R=async()=>{x(),m.value=!0,o.value=null,v.value=[],await A();const l=C.find(e=>e.id===p.value);if(l)o.value=l,v.value=C.filter(e=>e.id!==p.value&&(e.dynasty===l.dynasty||e.artist===l.artist)).slice(0,4);else{console.error(`æœªæ‰¾åˆ°IDä¸º${p.value}çš„ä½œå“è¯¦æƒ…`),u.push("/historical-timeline");return}setTimeout(()=>{m.value=!1,x()},300)};V(()=>I.params.id,(l,e)=>{l!==e&&(console.log(`ä½œå“IDå·²å˜æ›´: ${e} -> ${l}`),R())},{immediate:!0});const S=l=>{if(l===p.value){console.log("å·²ç»åœ¨å½“å‰ä½œå“é¡µé¢ï¼Œä¸éœ€è¦å¯¼èˆª");return}u.replace(`/masterpiece/${l}`)},B=(l,e)=>{const s=C.find(r=>r.title===l&&r.artist===e);if(s){if(s.id===p.value){console.log("å·²ç»åœ¨å½“å‰ä½œå“é¡µé¢ï¼Œä¸éœ€è¦å¯¼èˆª");return}u.replace(`/masterpiece/${s.id}`)}else alert(`ã€Š${l}ã€‹çš„è¯¦ç»†ä¿¡æ¯æš‚æœªæ·»åŠ ï¼Œæ•¬è¯·æœŸå¾…ï¼`)},$=()=>{m.value=!1;const l=sessionStorage.getItem("masterpieceReferrer");l?(sessionStorage.removeItem("masterpieceReferrer"),u.push(l)):u.push("/historical-timeline")},z=l=>{M.value=l,k.value=!0,document.body.style.overflow="hidden"},D=()=>{k.value=!1,document.body.style.overflow="auto"};return W(()=>{}),(l,e)=>(n(),i(g,null,[t("div",{class:"masterpiece-detail-page",ref_key:"detailPageRef",ref:w},[q(L(G),{activePath:"/historical-timeline",onBackClick:$}),e[14]||(e[14]=t("div",{class:"app-header-spacer"},null,-1)),o.value?(n(),i("div",{key:0,class:j(["content-container",{"content-transitioning":m.value}])},[t("button",{class:"back-button",onClick:$},"â† è¿”å›ž"),t("div",O,[t("div",Z,[t("div",J,[t("h1",Q,a(o.value.title),1),t("div",X,[t("span",Y,"ä½œè€…: "+a(o.value.artist),1),t("span",ee,"å¹´ä»£: "+a(o.value.period)+" ("+a(o.value.dynasty)+"æœ)",1),o.value.collection?(n(),i("span",te,"æ”¶è—: "+a(o.value.collection),1)):c("",!0)]),t("section",se,[e[2]||(e[2]=t("h2",null,"ä½œå“ä»‹ç»",-1)),t("p",null,a(o.value.description),1)]),t("section",le,[e[3]||(e[3]=t("h2",null,"è‰ºæœ¯ä»·å€¼",-1)),t("p",null,a(o.value.significance),1)]),t("section",oe,[e[4]||(e[4]=t("h2",null,"åˆ›ä½œæŠ€æ³•",-1)),t("div",ie,[(n(!0),i(g,null,y(o.value.technique,(s,r)=>(n(),i("span",{class:"tag",key:r},a(s),1))),128))])]),o.value.size?(n(),i("section",ae,[e[5]||(e[5]=t("h2",null,"ä½œå“è§„æ ¼",-1)),t("p",null,a(o.value.size),1)])):c("",!0),o.value.collection?(n(),i("section",ne,[e[6]||(e[6]=t("h2",null,"æ”¶è—åœ°ç‚¹",-1)),t("p",null,a(o.value.collection),1)])):c("",!0),e[7]||(e[7]=t("div",{class:"scroll-viewer-container"},[t("span",{class:"bug-notice"},"æ­¤è·³è½¬åŠŸèƒ½æœ‰BUGï¼Œå¾…ä¿®å¤"),t("button",{class:"scroll-viewer-button",disabled:""},[t("span",{class:"scroll-icon"},"ðŸ–¼ï¸"),b(" å·è½´æŸ¥çœ‹æ¨¡å¼ ")])],-1))]),t("div",re,[o.value.imageUrl?(n(),i("div",ce,[t("img",{src:h(o.value.imageUrl),alt:o.value.title,class:"artwork-image",onClick:e[0]||(e[0]=s=>z(h(o.value.imageUrl)))},null,8,de)])):(n(),i("div",ue,[t("div",pe,[b(" ã€Š"+a(o.value.title)+"ã€‹ ",1),e[8]||(e[8]=t("div",{class:"placeholder-subtext"},"å›¾ç‰‡å‡†å¤‡ä¸­",-1))])]))])]),o.value.relatedWorks&&o.value.relatedWorks.length>0?(n(),i("section",ve,[e[12]||(e[12]=t("h2",null,"ç›¸å…³ä½œå“",-1)),t("div",me,[(n(!0),i(g,null,y(o.value.relatedWorks,(s,r)=>(n(),i("div",{key:r,class:"related-work-item",onClick:Te=>B(s.title,s.artist)},[t("h3",null,a(s.title),1),t("p",null,[e[9]||(e[9]=t("strong",null,"ä½œè€…:",-1)),b(" "+a(s.artist),1)]),t("p",null,[e[10]||(e[10]=t("strong",null,"å…³ç³»:",-1)),b(" "+a(s.relation),1)]),e[11]||(e[11]=t("div",{class:"view-detail"},"æŸ¥çœ‹è¯¦æƒ… â†’",-1))],8,fe))),128))])])):c("",!0)]),v.value.length>0?(n(),i("section",ge,[e[13]||(e[13]=t("h2",{class:"section-title"},"ç›¸å…³ç”»ä½œæŽ¨è",-1)),t("div",be,[(n(!0),i(g,null,y(v.value,s=>(n(),i("div",{key:s.id,class:"recommendation-card",onClick:r=>S(s.id)},[t("div",we,[s.imageUrl?(n(),i("img",{key:0,src:h(s.imageUrl),alt:s.title,class:"recommendation-image"},null,8,ke)):(n(),i("div",he,[t("span",null,a(s.title),1)]))]),t("div",ye,[t("h3",null,a(s.title),1),t("p",null,a(s.artist)+" | "+a(s.dynasty)+"æœ",1)])],8,_e))),128))])])):c("",!0)],2)):c("",!0)],512),k.value?(n(),i("div",{key:0,class:"image-modal",onClick:D},[t("div",{class:"image-modal-content",onClick:e[1]||(e[1]=E(()=>{},["stop"]))},[t("span",{class:"close-button",onClick:D},"Ã—"),t("img",{src:M.value,alt:"Zoomed Image",class:"zoomed-image"},null,8,Ce)])])):c("",!0)],64))}}),Re=K(Ie,[["__scopeId","data-v-87b8d428"]]);export{Re as default};
