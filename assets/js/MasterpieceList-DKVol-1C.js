import{d as D,e as v,u as I,f as $,A as T,z as B,g as o,a as C,h as i,q as M,l as k,t as l,j as E,F as f,i as _,o as c}from"./vendor-BA6P5Hzh.js";import{k as w,j as L,m as P,_ as j}from"./index-4vPGLJHO.js";import{m as y}from"./art-detail-info-QH3f716g.js";const x={class:"masterpiece-list-page"},N={class:"content-container"},S={key:0,class:"dynasty-filter-info"},V={class:"dynasty-badge"},A={class:"dynasty-sections"},F={class:"dynasty-title"},R={class:"masterpieces-grid"},U=["onClick"],z={class:"card-content"},H={class:"masterpiece-title"},O={class:"masterpiece-meta"},G={class:"artist"},J={class:"masterpiece-desc"},K={key:0,class:"technique-tags"},Q=D({__name:"MasterpieceList",setup(W){const p=E(),g=I(),r=v(()=>{const e=g.query.dynasty;return e?parseInt(e):null}),d=v(()=>r.value===null?null:w.find(e=>e.id===r.value)),h=$([]),m=()=>{const e=[];r.value!==null?P(r.value).forEach(t=>{var a;const s=y.find(u=>u.title===t.title&&u.artist===t.artist);e.push({id:t.id,title:t.title,artist:t.artist,period:t.time,dynasty:((a=d.value)==null?void 0:a.name)||"",description:t.description,significance:t.significance,technique:(s==null?void 0:s.technique)||[],imageUrl:t.imageId?`/assets/images/paintings/${t.imageId}.webp`:void 0,collection:t.location})}):w.forEach(n=>{n.masterpieces.forEach(t=>{const s=y.find(a=>a.title===t.title&&a.artist===t.artist);e.push({id:t.id,title:t.title,artist:t.artist,period:t.time,dynasty:n.name,description:t.description,significance:t.significance,technique:(s==null?void 0:s.technique)||[],imageUrl:t.imageId?`/assets/images/paintings/${t.imageId}.webp`:void 0,collection:t.location})})}),h.value=e},q=v(()=>{const e={};return h.value.forEach(t=>{e[t.dynasty]||(e[t.dynasty]=[]),e[t.dynasty].push(t)}),Object.entries(e).map(([t,s])=>({dynasty:t,masterpieces:s}))}),b=e=>{const n=y.find(t=>t.id===e);if(n)p.push(`/masterpiece/${n.id}`);else{const t=h.value.find(s=>s.id===e);if(t){const s=y.find(a=>a.title===t.title&&a.artist===t.artist);s?p.push(`/masterpiece/${s.id}`):alert(`《${t.title}》的详细信息暂未添加，即将上线，敬请期待！`)}}};return T(()=>{m(),d.value&&setTimeout(()=>{window.scrollTo({top:0,behavior:"smooth"})},100)}),B(()=>g.fullPath,()=>{m(),setTimeout(()=>{window.scrollTo({top:0,behavior:"smooth"})},100)}),(e,n)=>(c(),o("div",x,[C(M(L),{activePath:"/historical-timeline"}),n[3]||(n[3]=i("div",{class:"app-header-spacer"},null,-1)),i("div",N,[n[2]||(n[2]=i("div",{class:"header-section"},[i("h1",{class:"page-title"},"中国绘画经典名作"),i("p",{class:"page-description"}," 探索跨越千年的中国绘画杰作，领略不同朝代的艺术风采 ")],-1)),d.value?(c(),o("div",S,[i("div",V,l(d.value.name)+"代 ",1),i("p",null,"当前显示"+l(d.value.name)+"代经典名作",1),i("button",{class:"clear-filter-btn",onClick:n[0]||(n[0]=t=>M(p).push("/masterpiece-list"))},"查看所有名作")])):k("",!0),i("div",A,[(c(!0),o(f,null,_(q.value,t=>(c(),o("div",{key:t.dynasty,class:"dynasty-section"},[i("h2",F,l(t.dynasty)+"朝",1),i("div",R,[(c(!0),o(f,null,_(t.masterpieces,s=>(c(),o("div",{key:s.id,class:"masterpiece-card",onClick:a=>b(s.id)},[i("div",z,[i("h3",H,l(s.title),1),i("div",O,[i("span",G,l(s.artist),1)]),i("p",J,l(s.description.substring(0,80))+"...",1),s.technique&&s.technique.length>0?(c(),o("div",K,[(c(!0),o(f,null,_(s.technique,(a,u)=>(c(),o("span",{key:u,class:"tag"},l(a),1))),128))])):k("",!0),n[1]||(n[1]=i("div",{class:"view-detail"},"查看详情 →",-1))])],8,U))),128))])]))),128))])])]))}}),tt=j(Q,[["__scopeId","data-v-83c55140"]]);export{tt as default};
